<html> 
  <head> 
    <title>Canvas</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript"> 
      $(function(){
        square = function(ctx, x, y, side) {
          ctx.beginPath();
          ctx.moveTo(x - side/2.0, y - side/2.0);
          ctx.lineTo(x + side/2.0, y - side/2.0);
          ctx.lineTo(x + side/2.0, y + side/2.0);
          ctx.lineTo(x - side/2.0, y + side/2.0);
          ctx.lineTo(x - side/2.0, y - side/2.0);
          ctx.stroke();
        }
        
        $('canvas').mousemove(function(e){
          var ctx = $(this).get(0).getContext('2d');
          ctx.clearRect(0, 0, $(this).width(), $(this).height())
          
          $(this).mouseout();
          points = $(this).data('points');
          if (points !== undefined) {
            $.each(points, function(){
              ctx.beginPath();
              ctx.arc(this.x,  this.y, 15, 0, Math.PI*2, false);
              ctx.strokeText("click!", this.x - 10, this.y + 4);  
              ctx.stroke();
            })
          }
          ctx.beginPath();
          ctx.fillStyle = 'rgba(1,0,0,0.4)';
          ctx.arc(e.clientX - $(this).position().left,  e.clientY - $(this).position().top, 10, 0, Math.PI*2, false);
          ctx.fill();
        }).css('cursor', 'none').click(function(e){
          var points = $(this).data('points')
          if (points === undefined) { points = []; }
          points.push({
            x: e.clientX - $(this).position().left,
            y: e.clientY - $(this).position().top
          });
          $(this).data('points', points);
        });


        
        $(window).resize(function(){
          $('canvas').attr('width',$(document).width() - 50).attr('height', $(document).height() - 50).mousemove();
        }).resize();


 
     });
    </script> 
    <style type="text/css"> 
      body { margin: 20px; font-family: arial,verdana,helvetica; background: #fff;}
      h1 { font-size: 140%; font-weight:normal; color: #036; border-bottom: 1px solid #ccc; }
      canvas { border: 2px solid #000; float: left; margin-right: 20px; margin-bottom: 20px; }
      pre { float:left; display:block; background: rgb(238,238,238); border: 1px dashed #666; padding: 15px 20px; margin: 0 0 10px 0; }
    </style> 
  </head> 
 
  <body> 
    <canvas></canvas> 
  </body> 
 
</html>